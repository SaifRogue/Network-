## 🔹 Static Routing 2.1 (الراوتر الثابت)

(هذا اسلوب قديم يحدد شبكات بطريقه يدويه ومحدوده)
### 🧩 التعريف

هو عملية **تحديد المسارات يدويًا** في جهاز التوجيه (Router) من قبل مسؤول الشبكة.  

أي أن الراوتر لا يكتشف المسارات تلقائيًا مثل بروتوكولات التوجيه الديناميكي (OSPF أو EIGRP)، بل يعتمد على **إدخال إداري مباشر** يحدد الوجهة والمسار والـ next-hop.   <--

---

### ⚙️ المبدأ العملي (<font color="#ff0000">ليس ضروري</font>)

عندما يصل الراوتر إلى باكيت بعنوان IP لا يعرفه، فإنه يبحث في جدول التوجيه.  
في حالة التوجيه الثابت، يكون هذا الجدول قد أُعد مسبقًا بأوامر مثل:

`Router(config)# ip route <destination-network> <subnet-mask> <next-hop-ip>`

🔸 مثال:

`Router(config)# ip route 192.168.20.0 255.255.255.0 192.168.10.2`

المعنى: للوصول إلى شبكة 192.168.20.0/24، استخدم البوابة 192.168.10.2.

---

### 🧠 المزايا

|الميزة|التوضيح|
|---|---|
|**تحكم كامل**|لا توجد تغييرات تلقائية في المسارات. كل شيء يتم وفق تصميمك.|
|**استقرار عالي**|لا يتأثر بتقلبات الشبكة أو الإعلانات الخاطئة.|
|**أمان أعلى**|الراوتر لا يتبادل جداول التوجيه مع أجهزة أخرى.|
|**استهلاك أقل للموارد**|لا يحتاج CPU أو RAM إضافية لبروتوكولات التحديث الديناميكي.|

---

### ⚠️ العيوب

|العيب|التوضيح|
|---|---|
|**صعوبة الصيانة**|عند توسّع الشبكة، كل تغيير يتطلب تعديلًا يدويًا.|
|**عدم التكيف مع الأعطال**|لو سقط مسار معيّن، لا يستطيع الراوتر البحث عن بديل تلقائي.|
|**إمكانية الخطأ البشري**|إدخال عنوان أو mask خاطئ قد يسبب انقطاع الشبكة.|

---

### 🔍 حالات الاستخدام المثالية

- **الشبكات الصغيرة** التي لا تتغير كثيرًا.
    
- **الربط بين مواقع ثابتة** (site-to-site) بعدد محدود من الراوترات.
    
- **بوابات الخروج (Edge Routers)** لتحديد وجهة الإنترنت الافتراضية (default route).
    
- **بيئات آمنة أو معزولة** حيث يُمنع بروتوكول التوجيه التلقائي لأسباب أمنية.
    

---

### 🧭 default route مثال شائع

يُستخدم لتوجيه كل الترافيك المجهول إلى بوابة واحدة:

`Router(config)# ip route 0.0.0.0 0.0.0.0 192.168.10.1`

> يُعرف هذا باسم **gateway of last resort**.

---

### 🔄 مقارنة سريعة مع Dynamic Routing

|الخاصية|Static Routing|Dynamic Routing|
|---|---|---|
|**التكوين**|يدوي|تلقائي|
|**التحمل للأعطال**|منخفض|مرتفع|
|**السكاليّة (Scalability)**|ضعيفة|قوية|
|**الأمان**|أعلى|أقل|
|**الاستهلاك من الموارد**|منخفض|مرتفع|
|**أمثلة**|ip route|OSPF, EIGRP, BGP|


---


## 🔹 Dynamic Routing (الراوتر الديناميكي)

### 🧩 التعريف

هو أسلوب يقوم فيه الراوتر **بتعلم المسارات تلقائيًا** من راوترات أخرى عبر **بروتوكولات التوجيه (Routing Protocols)**.  

بذلك يتم تحديث جداول التوجيه بشكل مستمر دون تدخل يدوي.

> باختصار: الراوترات تتحدث مع بعضها لتبادل “خرائط الطريق” داخل الشبكة.

---

### ⚙️ المبدأ العملي

كل راوتر في الشبكة يشارك معلوماته عن الشبكات التي يعرفها، وبناءً عليها يتم اختيار **أفضل مسار (Best Path)** إلى كل وجهة.

يعتمد الاختيار على مجموعة **Metrics** تختلف حسب نوع البروتوكول مثل:

- عدد القفزات (Hop Count)
    
- السرعة أو الكلفة (Cost/Bandwidth)
    
- الموثوقية (Reliability)
    
- التأخير (Delay)
    

---

### 🧠 الفوائد

|الفائدة|الشرح|
|---|---|
|**التحديث التلقائي**|يتعلم الراوتر التغييرات الجديدة فور حدوثها.|
|**التكيف مع الأعطال**|يغيّر المسار تلقائيًا إذا سقط رابط أو جهاز.|
|**قابلية التوسع (Scalability)**|مناسب للشبكات الكبيرة والمتغيرة.|
|**سهولة الإدارة**|لا حاجة لتعديل يدوي لكل شبكة جديدة.|
ترا يجيك سؤال عن ماهي الشبكه القابله للتوسع (scalability) هي الـ Dynamic Router

---

### ⚠️ العيوب

|العيب|التوضيح|
|---|---|
|**استهلاك أكبر للموارد**|يتطلب CPU وRAM لتبادل وتحديث الجداول.|
|**بطء في الاستقرار (Convergence)**|يحتاج وقتًا لاكتشاف التغييرات ومزامنتها.|
|**احتمالية التهيئة الخاطئة**|خطأ في بروتوكول أو Metric قد يؤدي إلى حلقات توجيه (Routing Loops).|

---

## 🧭 أنواع بروتوكولات التوجيه الديناميكي

|التصنيف|البروتوكولات|الشرح|
|---|---|---|
|**IGP – Interior Gateway Protocols**|OSPF, EIGRP, RIP|تعمل داخل نفس المؤسسة أو شبكة واحدة.|
|**EGP – Exterior Gateway Protocols**|BGP|تُستخدم بين مزوّدي الإنترنت أو شبكات مختلفة.|

---

### 🔸 1. OSPF (Open Shortest Path First)

- يعتمد على **خوارزمية Dijkstra (Shortest Path First)**.
    
- يستخدم مفهوم **Areas** لتقليل الحمل وتجزئة الشبكة.
    
- Metric: **Cost** (بناءً على سرعة الرابط).
    
- سريع في الاكتشاف والاستقرار (Fast Convergence).
    
- يُستخدم في المؤسسات الكبيرة.
    

🔹 مثال:

`Router(config)# router ospf 1 Router(config-router)# network 10.0.0.0 0.0.0.255 area 0`

---

### 🔸 2. EIGRP (Enhanced Interior Gateway Routing Protocol)

- بروتوكول **Cisco Proprietary** (خاص بسيسكو تاريخيًا).
    
- يستخدم **خوارزمية DUAL** لحساب المسار الأمثل.
    
- Metric مركّب من **Bandwidth + Delay + Reliability + Load**.
    
- يتميز بسرعة عالية واستقرار ممتاز داخل شبكات Cisco.
    

🔹 مثال:

`Router(config)# router eigrp 10 Router(config-router)# network 192.168.1.0`

---

### 🔸 3. BGP (Border Gateway Protocol)

- بروتوكول **الإنترنت الرئيسي (EGP)**.
    
- يعتمد على **سياسات (Policies)** وليس السرعة فقط.
    
- Metric أساسي: **Path Vector** و**AS Path**.
    
- يستخدم بين مزودي الخدمة (ISP) لتبادل المسارات عبر الإنترنت.
    
- يُعرف بأنه **بروتوكول الإنترنت الحقيقي** — ما يجعل الإنترنت متماسكًا.
    

🔹 مثال:

`Router(config)# router bgp 65001 Router(config-router)# neighbor 203.0.113.2 remote-as 65002`

---

### 🔸 مقارنة سريعة بين بروتوكولات Dynamic Routing

|العنصر|OSPF|EIGRP|BGP|
|---|---|---|---|
|**النوع**|IGP|IGP (Cisco)|EGP|
|**الخوارزمية**|Dijkstra|DUAL|Path Vector|
|**السرعة**|سريعة|أسرع|بطيئة نسبيًا|
|**البيئة المثلى**|مؤسسات متوسطة/كبيرة|شبكات Cisco|الإنترنت (ISPs)|
|**المقياس (Metric)**|Cost|Bandwidth/Delay|AS Path|

---


---




---

## ⚙️ 2.1 Routing Technologies

> **"Explain characteristics of routing technologies"**

---

### 🧭 أولًا: مقدمة في التوجيه (Routing)

التوجيه هو **عملية تحديد المسار الذي تسلكه الحزمة (Packet)** للوصول من شبكة إلى أخرى.  
ويتم هذا عبر أجهزة **Router** تستخدم جداول تسمى **Routing Tables** تحتوي على:

- الوجهات الممكنة (Destination Networks)
    
- القناع (Subnet Mask)
    
- العنوان التالي (Next-Hop IP)
    
- الواجهة المستخدمة (Outgoing Interface)
    
- المقياس أو الكلفة (Metric)
    

---

## 🔹 1. أنواع التوجيه

|النوع|التعريف|التحكم|القابلية للتوسع|الاستخدام|
|---|---|---|---|---|
|**Static Routing**|يتم إدخاله يدويًا بواسطة المهندس|كامل يدوي|محدود|شبكات صغيرة وثابتة|
|**Dynamic Routing**|الراوترات تتبادل المسارات تلقائيًا|تلقائي عبر بروتوكولات|مرتفع|شبكات متوسطة وكبيرة|

---

### 🔸 Static Routing

- يُكوَّن بالأمر:
    
    ```bash
    ip route <destination> <mask> <next-hop>
    ```
    
- يستخدم في الشبكات البسيطة أو كبوابة افتراضية.
    
- لا يتكيف مع الأعطال، ويتطلب تحديثًا يدويًا.
    

---

### 🔸 Dynamic Routing

- يعتمد على **بروتوكولات** تتبادل المعلومات تلقائيًا مثل:
    
    - **OSPF** (Open Shortest Path First)
        
    - **EIGRP** (Enhanced Interior Gateway Routing Protocol)
        
    - **BGP** (Border Gateway Protocol)
        
- يختار المسارات الأفضل بناءً على **Metrics**.
    
- قابل للتوسع ويتكيف مع التغييرات.
    

---

## 🔹 2. Route Selection (اختيار المسار)

عند وجود أكثر من طريق لنفس الوجهة، يُستخدم هذا التسلسل:

1. **Administrative Distance (AD)**  
    → الأقل رقمًا هو الأكثر ثقة.  
    أمثلة:
    
|المصدر|AD|
|---|---|
|Connected|0|
|Static|1|
|EIGRP|90|
|OSPF|110|
|RIP|120|
    
2. **Metric**  
    → يُستخدم داخل نفس البروتوكول لاختيار المسار الأسرع أو الأقل كلفة.
    
    - OSPF: يعتمد على **Cost** (سرعة الواجهة).
        
    - EIGRP: يعتمد على **Bandwidth + Delay**.
        
    - RIP: يعتمد على **Hop Count** (عدد القفزات).
        
3. **Prefix Length**  
    → المسار ذو **Subnet Mask أطول (أدق)** يُفضل على غيره.  
    مثال: /30 يُختار قبل /24.
    

---

## 🔹 3. Address Translation

### 🔸 NAT (Network Address Translation)

آلية لتبديل عنوان الـ IP أثناء انتقال الحزمة بين الشبكات الخاصة والعامة.

- **Static NAT:**  
    عنوان داخلي يُربط بعنوان عام ثابت.
    
- **Dynamic NAT:**  
    عنوان داخلي يُربط بعنوان عام متاح من مجموعة.
    
- **PAT (Port Address Translation):**  
    تُستخدم المنافذ لتمييز الجلسات المتعددة من عنوان عام واحد.
    
    > تُعرف بـ "many-to-one NAT" وغالبًا تسمى NAT Overload.
    

📘 الهدف: تقليل استهلاك الـ Public IPs وتأمين العناوين الداخلية.

---

## 🔹 4. FHRP (First Hop Redundancy Protocol)

عند وجود أكثر من راوتر في نفس الشبكة المحلية، قد تتعطل البوابة الافتراضية.  
هنا يأتي دور FHRP لتوفير **بوابة افتراضية احتياطية (Virtual Gateway)**.

### أهم الأنواع:

|البروتوكول|الشركة|رقم المنفذ|الميزة|
|---|---|---|---|
|**HSRP** (Hot Standby Router Protocol)|Cisco|UDP 1985|الأكثر شيوعًا في شبكات Cisco|
|**VRRP** (Virtual Router Redundancy Protocol)|Open standard|UDP 112|بديل مفتوح لـ HSRP|
|**GLBP** (Gateway Load Balancing Protocol)|Cisco|UDP 3222|يوفّر توازن تحميل بين الراوترات|

💡 هذه البروتوكولات تضمن ألا تتوقف الخدمة حتى إذا تعطلت بوابة رئيسية.

---

## 🔹 5. Virtual IP (VIP)

هو عنوان **منطقي مشترك** بين أكثر من راوتر في بروتوكولات FHRP.  
تتجه إليه الأجهزة على الشبكة كـ "Default Gateway"،  
ويقوم البروتوكول بتحويله إلى الراوتر النشط فعليًا.

---

## 🔹 6. Subinterfaces

تُستخدم لتقسيم واجهة فيزيائية واحدة إلى واجهات منطقية متعددة لتدعم:

- **Routing بين VLANs (Inter-VLAN Routing)**  
    مثال:
    
    ```bash
    interface g0/0.10
     encapsulation dot1q 10
     ip address 192.168.10.1 255.255.255.0
    ```
    
- تُختصر الموارد وتُستخدم في بيئات متعددة VLANs.
    

---

## 🔹 7. علاقة التوجيه بالطبقات (OSI)

|طبقة|الدور في التوجيه|
|---|---|
|Layer 2 – Data Link|التعريف الفيزيائي للأجهزة عبر MAC Address|
|**Layer 3 – Network**|هنا يحدث التوجيه الفعلي عبر IP Address|
|Layer 4 – Transport|إدارة الاتصال والـ Ports|

> إذًا: التوجيه = عملية Layer 3 تعتمد على جدول الـ IP Routes.

---

## 🔹 8. مفاهيم إضافية

|المصطلح|الشرح|
|---|---|
|**Routing Table**|قاعدة بيانات تحتوي على المسارات الممكنة.|
|**Next Hop**|عنوان الراوتر التالي في المسار.|
|**Convergence**|الزمن اللازم حتى تتفق الراوترات على المسارات الجديدة بعد التغيير.|
|**Default Route**|مسار افتراضي لأي وجهة غير معروفة (0.0.0.0/0).|
|**Loop Prevention**|آليات منع الحلقات (مثل Split Horizon، Hold Down).|

---

## 🧩 ملخص بصري

```
[PC1] → [Router1] → [Router2] → [Router3] → [Server]
                ↑
            Dynamic Routing
```

- كل راوتر يتبادل معلومات الشبكات التي يعرفها.
    
- عند سقوط أي رابط، يتم تعديل المسارات تلقائيًا.
    
- FHRP يضمن استمرار الخدمة حتى عند فشل أحد الراوترات.
    

---

## 🧱 الخلاصة

|المفهوم|Static Routing|Dynamic Routing|
|---|---|---|
|**الإدارة**|يدوي|تلقائي|
|**المرونة**|ضعيفة|عالية|
|**الأمان**|أعلى (لا تبادل)|أقل (يحتاج ضبط ACLs)|
|**الاستهلاك**|قليل|أعلى|
|**الاستخدام**|شبكات صغيرة أو ثابتة|شبكات كبيرة ومتغيرة|
|**أمثلة**|ip route|OSPF, EIGRP, BGP|

---
---

> **Static routing**  
> **Dynamic routing**  
> – Border Gateway Protocol (BGP)  
> – Enhanced Interior Gateway Routing Protocol (EIGRP)  
> – Open Shortest Path First (OSPF)  


> **Route selection**  
> – Administrative distance  
> – Prefix length  
> – Metric  


> **Address translation (NAT, PAT)**  
> **First Hop Redundancy Protocol (FHRP)**  
> **Virtual IP (VIP)**  
> **Subinterfaces**

---

### 🔹 إذًا البروتوكولات التي **يجب معرفتها وحفظها بالاسم والوظيفة** هي:

|نوع التوجيه|البروتوكول|الاختصار|الدور في الشبكة|
|---|---|---|---|
|**Dynamic Routing (IGP)**|**OSPF**|Open Shortest Path First|أكثر بروتوكولات المؤسسات استخدامًا (مفتوح المصدر)|
|**Dynamic Routing (IGP – Cisco)**|**EIGRP**|Enhanced Interior Gateway Routing Protocol|بروتوكول خاص بـ Cisco (سريع وموثوق)|
|**Dynamic Routing (EGP)**|**BGP**|Border Gateway Protocol|العمود الفقري للإنترنت، بين مزوّدي الخدمة (ISPs)|
|**Redundancy / High Availability**|**HSRP / VRRP / GLBP**|First Hop Redundancy Protocols|لتوفير بوابة احتياطية تلقائية عند تعطل الراوتر الرئيسي|
|**Address Translation**|**NAT / PAT**|Network Address Translation / Port Address Translation|لتحويل العناوين الخاصة إلى عامة والعكس|
|**Management of Interface Segments**|**Subinterfaces**|—|تقسيم واجهة الراوتر إلى واجهات منطقية للتعامل مع VLANs|

---

## 📘 يعني كم عدد البروتوكولات فعليًا لازم تحفظها؟

لو نحسب بدقة من الملف الرسمي:

- 3 بروتوكولات توجيه رئيسية:  
    🔹 **OSPF**, **EIGRP**, **BGP**
    
- 3 بروتوكولات احتياطية (FHRP):  
    🔹 **HSRP**, **VRRP**, **GLBP**
    
- 2 آلية ترجمة عناوين:  
    🔹 **NAT**, **PAT**
    

**الإجمالي:** 🔸 **8 بروتوكولات أساسية يجب معرفتها اسمًا ووظيفةً**.

---

## 🎯 مستوى الفهم المطلوب في الاختبار:

|المستوى|ما الذي يجب أن تعرفه؟|
|---|---|
|**تعريف البروتوكول**|ما وظيفته في التوجيه أو الشبكة.|
|**النوع**|هل هو IGP أو EGP؟ داخلي أم خارجي؟|
|**الاعتماد**|خوارزمية التوجيه (مثل Dijkstra لـ OSPF).|
|**المقياس (Metric)**|ما الذي يستخدمه لاختيار أفضل مسار.|
|**المزايا والعيوب**|متى تستخدمه ومتى لا.|
|**السيناريو التطبيقي**|مثال صغير يوضح كيف يعمل في بيئة حقيقية.|

---

## ⚠️ ملاحظات مهمة من CompTIA

- المنهج لا يطلب منك **إعداد بروتوكولات متقدمة عمليًا** (مثل كتابة كل أوامر BGP).
    
- لكنه يتوقع منك أن **تفهم كيف ولماذا تُستخدم**، وأن تميّزها عن بعضها في **أسئلة السيناريوهات**.
    
- يُحبّذ أيضًا أن تعرف **Administrative Distance** لكل منها، لأنّها مذكورة رسميًا في نفس الهدف.
---

## 🔹 الفرق بين IGP و EGP

|التصنيف|IGP (Interior Gateway Protocol)|EGP (Exterior Gateway Protocol)|
|---|---|---|
|**المعنى**|بروتوكولات التوجيه الداخلي|بروتوكولات التوجيه الخارجي|
|**النطاق**|تُستخدم داخل **مؤسسة أو شبكة واحدة**|تُستخدم **بين شبكات مختلفة** (مثل بين شركتين أو مزوّدي خدمة)|
|**الهدف**|إيجاد أفضل مسار داخل شبكة واحدة|تبادل المسارات بين شبكات مستقلة|
|**الأمثلة**|OSPF, EIGRP, RIP|BGP|
|**عدد الراوترات**|عادة عشرات أو مئات|قد يصل إلى آلاف على مستوى الإنترنت|
|**السياسات**|تعتمد على السرعة والكلفة (Metrics)|تعتمد على السياسات والسيطرة الإدارية (Policies)|
|**طبقة العمل**|تعمل على **الطبقة الثالثة (Network Layer)**|أيضًا على الطبقة الثالثة، لكن بأسلوب تبادل عالمي (AS)|
|**الهوية الإدارية**|جميع الراوترات تحت إدارة واحدة (Autonomous System واحد)|بين أنظمة مستقلة (AS إلى AS)|

> 💡 خلاصة:
> 
> - **IGP = داخل الشبكة الواحدة (Intra-AS)**
>     
> - **EGP = بين الشبكات (Inter-AS)**
>     

---

## 📘 جدول الحفظ السريع للبروتوكولات الثمانية في منهج N10-009

|البروتوكول|التصنيف|داخلي / خارجي|الطبقة (OSI)|الوظيفة الأساسية|نوع المقياس (Metric)|
|---|---|---|---|---|---|
|**OSPF** (Open Shortest Path First)|IGP|داخلي|Layer 3|يختار أقصر مسار باستخدام خوارزمية Dijkstra|**Cost (سرعة الواجهة)**|
|**EIGRP** (Enhanced Interior Gateway Routing Protocol)|IGP (خاص بـ Cisco)|داخلي|Layer 3|توجيه ديناميكي سريع وموثوق داخل شبكة Cisco|**Bandwidth + Delay**|
|**BGP** (Border Gateway Protocol)|**EGP**|خارجي|Layer 3|تبادل المسارات بين الشبكات المختلفة (الإنترنت)|**AS Path / Policy**|
|**HSRP** (Hot Standby Router Protocol)|FHRP (Cisco)|داخلي|Layer 3|بوابة افتراضية احتياطية عند تعطل الراوتر الرئيسي|—|
|**VRRP** (Virtual Router Redundancy Protocol)|FHRP (Open Standard)|داخلي|Layer 3|بديل مفتوح لـ HSRP لتوفير التكرار|—|
|**GLBP** (Gateway Load Balancing Protocol)|FHRP (Cisco)|داخلي|Layer 3|توازن تحميل بين عدة بوابات نشطة|—|
|**NAT** (Network Address Translation)|Translation|داخلي/خارجي|Layer 3|تحويل IP داخلي إلى خارجي والعكس|—|
|**PAT** (Port Address Translation)|Translation|داخلي/خارجي|Layer 3|تحويل عدة عناوين داخلية إلى عنوان خارجي واحد باستخدام المنافذ|—|

---



## 🔹 NAT (Network Address Translation 1.2)
## 🌐 Network Address Translation (NAT)

### 🔹 المفهوم العام

تقنية تُستخدم لترجمة **عناوين IP** بين الشبكات الداخلية (Private) والخارجية (Public)،  
وتعمل عادةً على **الراوتر أو الجدار الناري (Firewall)**.  
الغرض منها:

- الحفاظ على **عدد محدود من العناوين العامة**.
    
- زيادة الأمان بإخفاء عناوين الأجهزة الداخلية.
    

---

### 🔸 أنواع NAT

|النوع|الوصف|الاستخدام النموذجي|
|---|---|---|
|**Source NAT (SNAT)**|يغيّر **عنوان المصدر** في حزم البيانات عند الخروج إلى الإنترنت.|يستخدم عادةً لإخفاء عناوين الأجهزة الداخلية.|
|**Destination NAT (DNAT)**|يغيّر **عنوان الوجهة** عندما تدخل الحزم إلى الشبكة الداخلية.|لتوجيه الطلبات إلى سيرفر داخلي محدد (مثل Web Server).|
|**Static NAT**|ترجمة **ثابتة** (1 إلى 1) بين عنوان داخلي وخارجي.|مناسبة للسيرفرات التي تحتاج ثبات في الاتصال.|
|**Dynamic NAT**|ترجمة **ديناميكية** من قائمة عناوين عامة متاحة.|نادرة الاستخدام، عادةً في المؤسسات الكبيرة.|
|**PAT (Port Address Translation)** / **NAT Overload**|ترجمة **متعددة إلى واحد (Many-to-One)** باستخدام المنافذ لتمييز الجلسات.|أكثر الأنواع شيوعًا في المنازل والمكاتب الصغيرة.|

---

### 🔹 مثال توضيحي

#### 🏠 شبكة داخلية:

`192.168.1.10  →  Router →  203.0.113.5 (Public IP)`

- يقوم **SNAT/PAT** بتحويل العنوان الداخلي إلى العام.
    
- عند عودة الرد من الإنترنت، يقوم الراوتر بإرجاع الحزم للجهاز الصحيح استنادًا إلى رقم **المنفذ (Port)**.
    

---

### 🔹 ملخص المقارنة

|المعيار|Static NAT|Dynamic NAT|PAT|
|---|---|---|---|
|نوع العلاقة|1 ↔ 1|1 ↔ Many (pool)|Many ↔ 1|
|التخصيص|ثابت|مؤقت|حسب المنفذ|
|الاستخدام الشائع|خوادم داخلية|شركات كبيرة|منازل ومكاتب صغيرة|


---

---

CompTIA Network+ N10-009 – Domain 2.2: VLANs and Trunking

## 🧩 **VLANs (Virtual Local Area Networks)**

### 🔹 المفهوم:

هي طريقة لتقسيم شبكة محلية **واحدة ماديًا** إلى **عدة شبكات منطقية** مستقلة.  
يسمح ذلك بعزل حركة البيانات (Traffic) داخل نفس السويتش أو الشبكة.

> مثال:  
> قسم الموارد البشرية (HR) لا يرى حركة المرور الخاصة بقسم المالية (Finance) رغم أنهم على نفس السويتش.

---

### 🔸 الفوائد:

|الفائدة|التوضيح|
|---|---|
|**الأمان (Security)**|عزل الأقسام يمنع الوصول غير المصرح به.|
|**الكفاءة (Efficiency)**|يقلل من حركة البث (Broadcast Traffic).|
|**الإدارة (Manageability)**|تسهّل إدارة المستخدمين حسب الأقسام أو المواقع.|

---

### 🔸 أنواع VLAN:

|النوع|الوصف|مثال|
|---|---|---|
|**Default VLAN**|الشبكة الافتراضية التي تكون عليها جميع المنافذ (عادة VLAN 1).|VLAN 1|
|**Data VLAN**|تُستخدم لحمل بيانات المستخدمين العادية.|VLAN 10، VLAN 20|
|**Voice VLAN**|مخصصة لأجهزة VoIP لتقليل التأخير (latency).|VLAN 30|
|**Management VLAN**|تُستخدم لإدارة السويتش عبر SSH أو Telnet.|VLAN 99|
|**Native VLAN**|تُستخدم لحزم البيانات غير الموسومة (Untagged) في trunk port.|VLAN 1 (افتراضيًا)|

---

## 🌉 **Trunking**

### 🔹 المفهوم:

هو ربط **عدة سويتشات** أو **سويتش وراوتر** عبر **منفذ واحد** ينقل **عدة VLANs في نفس الوقت**.

- يسمح بمرور **traffic متعدد الـ VLANs** بين الأجهزة.
    
- يستخدم **Tagging** لتحديد الحزم لأي VLAN تنتمي.
    

---

### 🔸 البروتوكولات المستخدمة:

|البروتوكول|الاسم الكامل|الوصف|
|---|---|---|
|**ISL (Inter-Switch Link)**|بروتوكول قديم خاص بـ Cisco.|يُستخدم قليلًا الآن.|
|**802.1Q (Dot1Q)**|البروتوكول القياسي والمستخدم حاليًا.|يضيف Tag داخل الإطار لتحديد VLAN ID.|

---

### 🔹 802.1Q Tag Structure

يضيف 4 بايت إلى إطار Ethernet:

`| Destination MAC | Source MAC | Tag (802.1Q) | Type | Data | FCS |`

**الـ Tag يحتوي على:**

- **TPID (Tag Protocol Identifier)** = 0x8100
    
- **Priority Code Point (PCP)** = جودة الخدمة (QoS)
    
- **DEI (Drop Eligible Indicator)** = للتحكم في إسقاط الحزم
    
- **VLAN ID** = رقم الشبكة الافتراضية (0–4095)
    

---

### 🔹 Native VLAN

- أي **Traffic غير موسوم (Untagged)** يتم إرساله عبر **Native VLAN**.
    
- في الغالب تكون **VLAN 1**، ولكن يمكن تغييرها.
    
- يجب أن تكون **متطابقة على الطرفين** في trunk لتجنب أخطاء.
    

---

## ⚙️ **VLAN Configuration Example (Cisco CLI)**

### 🔸 إنشاء VLANs:


Switch(config)# vlan 10
Switch(config-vlan)# name HR
Switch(config)# vlan 20
Switch(config-vlan)# name Finance

### 🔸 تعيين المنافذ لـ VLAN:

Switch(config)# interface fastEthernet 0/1
Switch(config-if)# switchport mode access
Switch(config-if)# switchport access vlan 10
### 🔸 تفعيل Trunk:

Switch(config)# interface fastEthernet 0/24
Switch(config-if)# switchport mode trunk
Switch(config-if)# switchport trunk allowed vlan 10,20,30
Switch(config-if)# switchport trunk native vlan 99

---

## 🔍 **Summary**

| المصطلح     | الوصف السريع                            |
| ----------- | --------------------------------------- |
| VLAN        | تقسيم الشبكة منطقيًا داخل نفس السويتش   |
| Trunk       | يربط بين سويتشات متعددة ويمرر عدة VLANs |
| Tagging     | يحدد لأي VLAN تنتمي الحزمة              |
| Native VLAN | تمر عبرها الحزم غير الموسومة            |
| Access Port | ينتمي إلى VLAN واحدة فقط                |
| Trunk Port  | ينقل حزم عدة VLANs                      |


---



## Spanning Tree Protocol -  2.2

---

## 🧩 **Spanning Tree Protocol (STP)**

### 🔹 **الفكرة الأساسية**

يُستخدم **STP** لمنع **حلقات Layer 2 loops** في الشبكات التي تحتوي على أكثر من مسار واحد بين السويتشات.  
بدونه، يمكن أن تؤدي الحلقات إلى:

- **Broadcast storms** (عواصف بثّ)
    
- ازدواج الإطارات (duplicate frames)
    
- انهيار أداء الشبكة بالكامل.
    

---

## 🔸 **آلية عمل STP**

1. **اختيار Root Bridge**
    
    - كل سويتش له **Bridge ID (BID)** يتكوّن من **Priority (افتراضيًا 32768)** + **MAC address**.
        
    - السويتش ذو **أقل Bridge ID** يصبح **Root Bridge**.
        
2. **تحديد المسارات**
    
    - كل سويتش آخر يحسب المسار الأفضل نحو الـ Root بناءً على **Path Cost** (يعتمد على سرعة الرابط).
        
    - الواجهة ذات التكلفة الأقل تُصبح **Root Port**.
        
3. **تحديد المنافذ الفعالة والمعطّلة**
    
    - **Designated Port:** واجهة مختارة لإرسال الترافيك على الشبكة.
        
    - **Blocked Port:** واجهة تُعطّل لتجنّب الحلقات.
        

---

## 🔸 **حالات منافذ STP**

|الحالة|الوظيفة|هل تمرر بيانات؟|
|---|---|---|
|**Blocking**|تراقب BPDUs فقط|❌|
|**Listening**|تحدد الأدوار الجديدة للمنافذ|❌|
|**Learning**|تتعلم عناوين MAC بدون تمرير بيانات|❌|
|**Forwarding**|تمرر الترافيك فعليًا|✅|
|**Disabled**|منفذ غير فعّال|❌|

---

## 🔹 **أنواع STP الحديثة**

|البروتوكول|الاسم الكامل|الميزة|
|---|---|---|
|**STP (802.1D)**|Spanning Tree Protocol|النسخة الأصلية (بطيئة في التحديث).|
|**RSTP (802.1w)**|Rapid Spanning Tree Protocol|أسرع بكثير (يحوّل المنافذ خلال ثوانٍ).|
|**MSTP (802.1s)**|Multiple Spanning Tree Protocol|يسمح بإنشاء شجرة واحدة لكل مجموعة VLANs لتقليل الحمل.|

---

## 🔹 **BPDUs (Bridge Protocol Data Units)**

- رسائل ترسلها السويتشات لتبادل معلومات STP.
    
- تُستخدم لتحديد الـ Root Bridge والتأكد من خلو الشبكة من الحلقات.
    
- أنواعها:
    
    - **Configuration BPDUs**
        
    - **Topology Change Notification (TCN)**
        

---

## 🔹 **PortFast و BPDU Guard**

ميزات أمان إضافية:

- **PortFast:** يضع المنافذ المتصلة بأجهزة المستخدمين مباشرة في حالة **forwarding** لتقليل زمن الانتظار.
    
- **BPDU Guard:** يُغلق المنفذ تلقائيًا إذا استقبل BPDU من جهاز لا يجب أن يشارك في STP (مثل حاسوب مستخدم).
    

---

## ⚙️ **أوامر Cisco الأساسية**

`Switch(config)# spanning-tree mode rapid-pvst   ! لتفعيل RSTP Switch(config)# spanning-tree vlan 10 priority 24576 Switch(config)# spanning-tree portfast Switch(config)# spanning-tree bpduguard enable`

التحقق من الحالة:

`Switch# show spanning-tree`

---

## 🧠 **ملخص سريع**

| المفهوم                   | الغرض                         |
| ------------------------- | ----------------------------- |
| **STP**                   | يمنع الحلقات في شبكات Layer 2 |
| **Root Bridge**           | السويتش الرئيسي في الشجرة     |
| **BPDUs**                 | رسائل التفاوض والتحديث        |
| **Blocked Ports**         | تمنع الحلقات الفعلية          |
| **RSTP**                  | نسخة أسرع من STP              |
| **MSTP**                  | إدارة متعددة لـ VLANs         |
| **PortFast / BPDU Guard** | تسريع الاتصال وزيادة الأمان   |


---
---

## نظري سريع لا تطول هنا
## 🔹 Wireless Networking & Technologies (2.3)

### 🛰️ القنوات (Channels)

- **Channel Width:** ‏20 / 40 / 80 / 160 MHz — كلما زاد العرض زادت السرعة وزاد احتمال التداخل.
    
- **Non-Overlapping:** ‏2.4 GHz → القنوات 1 و 6 و 11 فقط لا تتداخل.
    
- **802.11h:** تنظيم للطاقة والتردد لتجنّب تداخل الرادارات.
    

---

### 📡 الترددات (Frequencies)

|النطاق|المدى|السرعة|الملاحظات|
|---|---|---|---|
|**2.4 GHz**|أطول|أقل|ازدحام وتداخل أكثر|
|**5 GHz**|أقصر|أعلى|تداخل أقل|
|**6 GHz (Wi-Fi 6E)**|متوسط|عالي جدًا|أقل ازدحام|
|**Band Steering:** توجيه الأجهزة القادرة تلقائيًا إلى 5 أو 6 GHz لتخفيف الحمل عن 2.4 GHz.||||

---

### 📶 معرفات الشبكة (SSID)

- **SSID:** اسم الشبكة الظاهر.
    
- **BSSID:** عنوان MAC لكل Access Point.
    
- **ESSID:** مجموعة APs تشكل شبكة موحّدة واحدة.
    

---

### 🌐 أنواع الشبكات اللاسلكية

|النوع|الوصف|
|---|---|
|**Infrastructure**|عبر Access Point مركزي.|
|**Ad Hoc**|اتصال مباشر بدون AP.|
|**Mesh**|نقاط متعددة مترابطة لتغطية أوسع.|
|**PtP**|وصلة بين موقعين ثابتين.|

---

### 🔒 الأمان (Security)

- **WPA2 (AES/CCMP):** آمن وشائع.
    
- **WPA3 (SAE):** أحدث، يحسن مقاومة Brute Force.
    
- **PSK:** كلمة مرور واحدة للجميع.
    
- **Enterprise (802.1X + RADIUS):** بيانات اعتماد فردية لكل مستخدم.
    

---

### 👥 شبكات الضيوف (Guest Network)

شبكة منفصلة تُدار غالبًا عبر **Captive Portal** (صفحة دخول قبل الإنترنت).

---

### 📡 الهوائيات (Antennas)

|النوع|الاستخدام|
|---|---|
|**Omnidirectional**|بث في جميع الاتجاهات (منازل، مكاتب).|
|**Directional**|تركيز الإشارة باتجاه واحد (ربط مبنيين).|

---

### ⚙️ نقاط الوصول (Access Points)

|النوع|الإدارة|
|---|---|
|**Autonomous AP**|يعمل بشكل مستقل.|
|**Lightweight AP**|يُدار مركزيًا عبر **WLC** (Controller).|

---

📘 **الخلاصة:**  
شبكات Wi-Fi تعتمد على ترددات 2.4 / 5 / 6 GHz،  
وتنظم القنوات لمنع التداخل،  
مع حماية WPA2/3 ومصادقة PSK أو RADIUS،  
ويتحكم WLC بـ APs لإدارة شبكة مرنة وآمنة.

---

**Network Types – CompTIA Network+ 2.3** 👇

|**النوع**|**الاختصار**|**النطاق الجغرافي**|**السرعة التقريبية**|**الملكية**|**أهم الاستخدامات**|**أمثلة واقعية**|
|---|---|---|---|---|---|---|
|**شبكة محلية**|**LAN**|مبنى واحد أو موقع صغير|عالية جدًا (1–10 Gbps)|خاصة (مؤسسة أو شركة)|ربط الحواسيب داخل المكتب|شبكة أكاديمية طويق الداخلية|
|**شبكة واسعة**|**WAN**|دول أو مدن متعددة|أقل من LAN|غالبًا تابعة لمزود خدمة (ISP)|ربط فروع الشركات حول العالم|شبكة Amazon العالمية|
|**شبكة حضرية**|**MAN**|داخل مدينة أو منطقة صناعية|متوسطة إلى عالية|غالبًا حكومية أو بلدية|ربط الجامعات أو المستشفيات في نفس المدينة|شبكة بلدية الرياض الطبية|
|**شبكة لاسلكية محلية**|**WLAN**|مثل LAN لكن لاسلكية|متغيرة حسب الإشارة|خاصة|الاتصال عبر Wi-Fi داخل المكاتب|شبكة Wi-Fi في القاعات|
|**شبكة تخزين**|**SAN**|داخل مركز بيانات|عالية جدًا|خاصة|تخزين وربط خوادم البيانات|مراكز بيانات البنوك|
|**شبكة شخصية**|**PAN**|أمتار قليلة (10 م تقريبًا)|منخفضة|شخصية|ربط الأجهزة المحمولة والسماعات|Bluetooth، Hotspot|
|**شبكة جامعية / مؤسسية**|**CAN**|عدة مبانٍ ضمن منشأة واحدة|عالية|خاصة|ربط مباني الجامعة أو الشركة|شبكة جامعة الملك سعود|
|**شبكة صناعية / تحكم**|**SCADA / ICS**|مواقع تشغيل صناعية|متغيرة حسب النظام|حكومية / صناعية|مراقبة خطوط الإنتاج والطاقة|أنظمة التحكم في المصانع|
|**شبكة المؤسسات**|**Enterprise**|أي نطاق حسب حجم المؤسسة|متغيرة|خاصة|دعم العمليات الداخلية|شبكة شركة أرامكو|
|**شبكة مزود الخدمة**|**Service Provider**|واسعة جدًا (على مستوى دولة)|عالية جدًا|عامة (ISP)|تقديم الإنترنت والخدمات|STC، Mobily، Zain|
|**شبكة برمجية-محددة**|**SD-WAN**|تربط فروع متعددة|تعتمد على الإنترنت|خاصة|تحسين WAN بالتحكم البرمجي|شبكات الشركات الحديثة|

---
**Wireless Encryption – CompTIA Network+ 2.3** 👇

| **التقنية** | **الخوارزمية**                     | **القوة الأمنية** | **ملاحظات**                                        |
| ----------- | ---------------------------------- | ----------------- | -------------------------------------------------- |
| **WEP**     | RC4                                | ❌ ضعيفة جدًا      | قديمة وسهلة الكسر                                  |
| **WPA**     | TKIP                               | ⚠️ متوسطة         | تحسين مؤقت بعد WEP                                 |
| **WPA2**    | AES-CCMP                           | ✅ قوية            | المعيار الأساسي لسنوات                             |
| **WPA3**    | SAE (Simultaneous Auth. of Equals) | 🔒 الأقوى حاليًا  | ما تقدر **تجرب كلمات مرور كثيرة لتخمين الباسورد**. |
| **Open**    | لا يوجد تشفير                      | 🚫 غير آمن        | لا يُستخدم إلا في الضيوف                           |


---

## ⚙️ Installing Networks (تثبيت الشبكات)

يُركّز هذا الهدف على **الخطوات العملية والتخطيطية لإنشاء شبكة جديدة أو تحديث شبكة قائمة**، من مرحلة التصميم إلى التحقق من الأداء.

---

### 🔹 1. **Requirements (تحديد المتطلبات)**

قبل أي تركيب، يجب جمع المتطلبات بدقة:

- عدد المستخدمين والأجهزة.
    
- نوع البيانات (صوت، فيديو، قواعد بيانات…).
    
- مستوى الأمان المطلوب.
    
- عرض النطاق المطلوب (Bandwidth).
    
- التوسع المستقبلي المتوقع (Scalability).
    

---

### 🔹 2. **Site Survey (مسح الموقع)**

يُجرى **لتحديد أفضل أماكن نقاط الاتصال والكابلات والمعدات**.

- قياس قوة الإشارة اللاسلكية (Wi-Fi Heatmap).
    
- تحديد مصادر التداخل (Microwave، جدران معدنية…).
    
- تحديد المسارات الفيزيائية للكابلات.
    

---

### 🔹 3. **Cabling and Hardware Installation (تركيب الكابلات والمعدات)**

- اختيار نوع الكابل المناسب (Cat6، Cat6a، Fiber…).
    
- استخدام **Patch Panels** و **Cable Management** منظم.
    
- تركيب **Switches، Routers، Access Points، Firewalls**.
    

---

### 🔹 4. **Network Configuration (إعداد الشبكة)**

- إعداد **VLANs، IP addressing، DHCP، Routing، Wireless SSID**.
    
- تمكين ميزات الأمان (Port Security، WPA3، ACLs).
    
- اختبار الاتصال (Ping، Traceroute).
    

---

### 🔹 5. **Testing and Verification (الاختبار والتحقق)**

- التحقق من السرعة باستخدام أدوات مثل **iPerf** أو **Speedtest**.
    
- فحص جودة الإشارة (Signal-to-Noise Ratio).
    
- اختبار الكابلات بأجهزة **Cable Tester / OTDR**.
    
- ضمان أن كل الأجهزة تصل إلى الموارد المطلوبة.
    

---

### 🔹 6. **Documentation (التوثيق)**

يُعتبر التوثيق جزءًا أساسيًا من الشبكات الاحترافية:

- خرائط الشبكة (Network Diagrams).
    
- تفاصيل VLANs و IPs.
    
- قوائم الأجهزة وعناوين MAC.
    
- سجلّات الصيانة والتحديثات.
    

---

### 🔹 7. **Optimization and Maintenance (التحسين والصيانة)**

- مراقبة الأداء (SNMP، NetFlow، Syslog).
    
- جدولة التحديثات Firmware / Software.
    
- مراجعة نقاط الاختناق وتحسينها دوريًا.
    

---

## 🧾 جدول ملخّص – Installing Networks

| **المرحلة**                    | **الوصف الأساسي**     | **الأدوات أو الأنشطة**       | **الهدف النهائي**                  |
| ------------------------------ | --------------------- | ---------------------------- | ---------------------------------- |
| **1. تحديد المتطلبات**         | تحليل حاجة الشركة     | مقابلات، جمع البيانات        | وضع خطة دقيقة قبل التركيب          |
| **2. مسح الموقع**              | فحص البيئة الفيزيائية | Wi-Fi Analyzer، خرائط الموقع | اختيار أفضل موقع للأجهزة والكابلات |
| **3. تركيب الكابلات والمعدات** | توصيلات فيزيائية      | Patch Panel، Crimper، Tester | تجهيز البنية التحتية للشبكة        |
| **4. إعداد الشبكة**            | ضبط التكوينات         | VLAN، IP، Routing، Security  | تشغيل الشبكة وفق التصميم           |
| **5. الاختبار والتحقق**        | التأكد من الأداء      | Ping، Traceroute، iPerf      | التأكد من أن كل شيء يعمل           |
| **6. التوثيق**                 | تسجيل كل التفاصيل     | Network Diagram، Spreadsheet | سهولة الصيانة المستقبلية           |
| **7. التحسين والصيانة**        | مراقبة وتحديث دوري    | SNMP، Logs، Updates          | ضمان الاستقرار والأداء المستمر     |


---
---

**Power – CompTIA Network+ N10-009 – 2.4** 👇

|**النوع**|**الاختصار**|**الوصف البسيط**|**الاستخدام**|
|---|---|---|---|
|**Power over Ethernet**|**PoE (802.3af)**|يرسل **الطاقة والكهرباء عبر كابل الشبكة** نفسه|لتغذية كاميرات IP أو Access Points|
|**PoE+**|**802.3at**|نفس PoE لكن **قوة أعلى (حتى 25 واط)**|للأجهزة الأكبر مثل VoIP Phones|
|**PoE++**|**802.3bt**|أقوى نوع، **حتى 90 واط**|للشاشات وأجهزة قوية|
|**UPS**|—|جهاز **يحفظ الطاقة وقت انقطاع الكهرباء**|يحمي السيرفرات|
|**Power Injector**|—|**يضيف الكهرباء** إلى كابل الشبكة يدويًا|عندما السويتش ما يدعم PoE|


___
## في مواضيع عن الطاقه والحريق لكن سأتجاهلها


---


